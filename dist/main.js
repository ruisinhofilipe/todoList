(()=>{"use strict";const e=(e,t,o,...l)=>{const c=document.createElement(e);for(let e in t)c.setAttribute(e,t[e]);return c.textContent=o,l.forEach((e=>{c.appendChild(e)})),c};let t,o=[];const l=document.querySelector(".addProject-popup"),c=document.querySelector(".overlay");function n(){document.querySelectorAll(".projectsNameDiv").forEach((e=>{o.indexOf(t)==e.getAttribute("index")?e.classList.add("clicked"):e.classList.remove("clicked")}))}function d(){document.querySelector(".addPrj").addEventListener("click",(()=>{document.querySelector(".addProject-popup").classList.add("visible"),c.classList.add("visible")})),function(e){let t=document.querySelectorAll(".projectsNameDiv");for(let e=0;e<t.length;e++)t[e].remove()}(),o.forEach((l=>{let c=o.indexOf(l);const r=e("div",{class:"projectsNameDiv",index:c}),s=e("div",{class:"projectsName"},l),a=e("button",{class:"removeProject"},"x");r.appendChild(s),r.appendChild(a),document.querySelector(".displayProjects").appendChild(r),r.addEventListener("click",(()=>{t=r.querySelector(".projectsName").textContent,m(o.indexOf(t)),d(),n()})),a.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation();let l=a.parentNode.getAttribute("index");o.splice(l,1),i.splice(l,1),1==o.length?(t=o[0],d(),m(o.indexOf(t)),n()):o.includes(t)?(d(),m(o.indexOf(t)),n()):o.includes(t)?(t="",d(),removeDom(".displayTodo")):(t=o[0],d(),m(o.indexOf(t)),n())}))}))}const i=[],r=document.querySelector(".displayTodos"),s=document.querySelector(".addTodo"),a=document.querySelector(".new-project-form"),u=document.querySelector(".overlay");function m(l){u.classList.remove("visible"),a.classList.remove("visible"),document.querySelectorAll(".displayTodo").forEach((e=>{e.remove()}));let c=0;if(o.length>0)for(let n=0;n<i[l].length;n++){const d=e("div",{class:"displayTodo"},void 0);for(let t in i[l][n])d.appendChild(e("p",{class:`${t}Todo`},`${t}: ${i[l][n][t]}`));const s=e("button",{class:"removeTodo",indexParagraph:c},"x");d.appendChild(s),r.appendChild(d),c++,s.addEventListener("click",(()=>{i[o.indexOf(t)].splice(s.getAttribute("indexParagraph"),1),m(o.indexOf(t))}))}}function v(){document.getElementById("title").value="",document.getElementById("dueDate").value=""}d(),document.querySelector(".confirmButton").addEventListener("click",(()=>{var e;null===(e=document.getElementById("titleProject").value)||o.includes(e)||""===e||" "===e?alert("Please, introduce a valid project name or you that you haven't introduced yet."):(o.push(e),i.push([]),document.getElementById("titleProject").value="",l.classList.remove("visible"),c.classList.remove("visible"),t=e,d(),document.querySelector(".noProjectsDiv").style.display="none"),n(),m(o.indexOf(t))})),document.querySelector(".cancelButton").addEventListener("click",(()=>{document.querySelector(".addProject-popup").classList.remove("visible"),c.classList.remove("visible")})),s.addEventListener("click",(()=>{u.classList.add("visible"),a.classList.add("visible")})),document.querySelector(".confirmButtonForm").addEventListener("click",(e=>{e.preventDefault(),function(){if(0===o.length)document.querySelector(".noProjectsDiv").style.display="block",v();else{let e=document.getElementById("title").value,l=document.getElementById("dueDate").value;""==l&&(l="No date preview");let c=document.getElementById("priority").options[document.getElementById("priority").selectedIndex].text;i[o.indexOf(t)].push(((e,t,o)=>({title:e,dueDate:t,priority:o}))(e,l,c)),document.querySelector(".noProjectsDiv").style.display="none",m(o.indexOf(t)),v()}}()})),document.querySelector(".cancelButtonForm").addEventListener("click",(e=>{e.preventDefault(),u.classList.remove("visible"),a.classList.remove("visible")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixTQUFTLEtBQ2RyQixTQUFTVSxjQUFjLHFCQUMvQk8sVUFBVUUsT0FBTyxXQUM5QlIsRUFBUU0sVUFBVUUsT0FBTyxVQUFVLElFakd2Q3VCLEVBQWtCckIsaUJBQWlCLFNBQVMsS0FDeEMsRUFBUUosVUFBVUMsSUFBSSxXQUN0QixFQUFLRCxVQUFVQyxJQUFJLFVBQVUsSUFHYmxCLFNBQVNVLGNBQWMsc0JBQy9CVyxpQkFBaUIsU0FBVVksSUFDbkNBLEVBQUVDLGlCQVlWLFdBQ0ksR0FBNEIsSUFBeEIxQixFQUFhaUIsT0FDYnpCLFNBQVNVLGNBQWMsa0JBQWtCMkMsTUFBTUMsUUFBVSxRQUN6RE4sUUFDRyxDQUNILElBQUlPLEVBQVF2RCxTQUFTaUQsZUFBZSxTQUFTQyxNQUN6Q00sRUFBVXhELFNBQVNpRCxlQUFlLFdBQVdDLE1BQ2xDLElBQVhNLElBQ0FBLEVBQVUsbUJBRWQsSUFBSUMsRUFBV3pELFNBQVNpRCxlQUFlLFlBQVlTLFFBQVExRCxTQUFTaUQsZUFBZSxZQUFZVSxlQUFlQyxLQUM5R3RCLEVBQVU5QixFQUFhTyxRQUFRUixJQUFpQjZDLEtBbkNwQyxFQUFDRyxFQUFPQyxFQUFTQyxLQUMxQixDQUFFRixRQUFPQyxVQUFTQyxhQWtDZ0NJLENBQVlOLEVBQU9DLEVBQVNDLElBQ2pGekQsU0FBU1UsY0FBYyxrQkFBa0IyQyxNQUFNQyxRQUFVLE9BQ3pEdEIsRUFBYXhCLEVBQWFPLFFBQVFSLElBQ2xDeUMsR0FDSixDQUNKLENBM0JRYyxFQUFVLElBR0s5RCxTQUFTVSxjQUFjLHFCQUMvQlcsaUJBQWlCLFNBQVVZLElBQ2xDQSxFQUFFQyxpQkFDRixFQUFRakIsVUFBVUUsT0FBTyxXQUN6QixFQUFLRixVQUFVRSxPQUFPLFVBQVUsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2VsZW1lbnRGYWN0b3J5LmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL3Byb2plY3RzLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2NsZWFyRHVwbGljYXRlLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL3RvZG9zLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2NsZWFyUGFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBlbGVtZW50RmFjdG9yeSA9ICh0eXBlLCBhdHRyaWJ1dGVzLCB0ZXh0Q29udGVudCwgLi4uY2hpbGRyZW4pID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgICBmb3IgKGxldCBrZXkgaW4gYXR0cmlidXRlcykge1xuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gICAgfVxuICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0Q29udGVudDtcblxuICAgIGNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGNoaWxkKVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGVsZW1lbnRGYWN0b3J5OyIsImltcG9ydCBlbGVtZW50RmFjdG9yeSBmcm9tICcuL2VsZW1lbnRGYWN0b3J5JztcbmltcG9ydCBjbGVhckR1cGxpY2F0ZSBmcm9tICcuL2NsZWFyRHVwbGljYXRlJztcbmltcG9ydCB7IHRvZG9BcnJheSB9IGZyb20gJy4vdG9kb3MnO1xuaW1wb3J0IHsgZGlzcGxheVRvZG9zIH0gZnJvbSAnLi90b2Rvcyc7XG5cbmV4cG9ydCBsZXQgcHJvamVjdEFycmF5ID0gW107XG5leHBvcnQgbGV0IGN1cnJlbnRQcm9qZWN0O1xuXG5jb25zdCBwcm9qZWN0Q2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkUHJvamVjdC1wb3B1cCcpO1xuY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5Jyk7XG5cbi8vIFB1c2ggcHJvamVjdCB0byBhcnJheVxuZnVuY3Rpb24gcHVzaFByb2plY3QocHJvamVjdE5hbWUpIHtcbiAgICBpZiAocHJvamVjdE5hbWUgIT09IG51bGwgJiYgIXByb2plY3RBcnJheS5pbmNsdWRlcyhwcm9qZWN0TmFtZSkgJiYgcHJvamVjdE5hbWUgIT09ICcnICYmIHByb2plY3ROYW1lICE9PSAnICcpIHtcbiAgICAgICAgcHJvamVjdEFycmF5LnB1c2gocHJvamVjdE5hbWUpO1xuICAgICAgICB0b2RvQXJyYXkucHVzaChbXSk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZVByb2plY3QnKS52YWx1ZSA9ICcnO1xuICAgICAgICBwcm9qZWN0Q2xhc3MuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgICAgY3VycmVudFByb2plY3QgPSBwcm9qZWN0TmFtZTtcbiAgICAgICAgZGlzcGxheUFycmF5UHJvamVjdHMoKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5vUHJvamVjdHNEaXYnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KCdQbGVhc2UsIGludHJvZHVjZSBhIHZhbGlkIHByb2plY3QgbmFtZSBvciB5b3UgdGhhdCB5b3UgaGF2ZW5cXCd0IGludHJvZHVjZWQgeWV0LicpO1xuICAgIH07XG4gICAgcmV0dXJuIHByb2plY3RBcnJheTtcbn07XG5cbi8vIFN0eWxlIGVhY2ggcHJvamVjdCB3aGVuIGNsaWNrZWRcbmZ1bmN0aW9uIHN0eWxlUHJvamVjdCgpIHtcbiAgICBsZXQgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvamVjdHNOYW1lRGl2Jyk7XG4gICAgcHJvamVjdHMuZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICAgICAgaWYgKHByb2plY3RBcnJheS5pbmRleE9mKGN1cnJlbnRQcm9qZWN0KSA9PSBwcm9qZWN0LmdldEF0dHJpYnV0ZSgnaW5kZXgnKSkge1xuICAgICAgICAgICAgcHJvamVjdC5jbGFzc0xpc3QuYWRkKCdjbGlja2VkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9qZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ2NsaWNrZWQnKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZnVuY3Rpb24gZGlzcGxheUFycmF5UHJvamVjdHMoKSB7XG4gICAgLy8gQ2hhbmdlIHByb2plY3QgaW5wdXQgZGlzcGxheSBwcm9wZXJ0eVxuICAgIGNvbnN0IGFkZFByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkUHJqJyk7XG4gICAgYWRkUHJvamVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29uc3QgcHJvamVjdENsYXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZFByb2plY3QtcG9wdXAnKTtcbiAgICAgICAgcHJvamVjdENsYXNzLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcbiAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgfSk7XG5cbiAgICBjbGVhckR1cGxpY2F0ZSgnLnByb2plY3RzTmFtZURpdicpO1xuICAgIHByb2plY3RBcnJheS5mb3JFYWNoKHByb2plY3QgPT4ge1xuICAgICAgICBsZXQgaW5kZXggPSBwcm9qZWN0QXJyYXkuaW5kZXhPZihwcm9qZWN0KTtcbiAgICAgICAgY29uc3QgcHJvamVjdE5hbWVEaXYgPSBlbGVtZW50RmFjdG9yeSgnZGl2JywgeyBjbGFzczogJ3Byb2plY3RzTmFtZURpdicsIGluZGV4IH0pO1xuICAgICAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGVsZW1lbnRGYWN0b3J5KCdkaXYnLCB7IGNsYXNzOiAncHJvamVjdHNOYW1lJyB9LCBwcm9qZWN0KTtcbiAgICAgICAgY29uc3QgcmVtb3ZlUHJvamVjdCA9IGVsZW1lbnRGYWN0b3J5KCdidXR0b24nLCB7IGNsYXNzOiAncmVtb3ZlUHJvamVjdCcgfSwgJ3gnKTtcbiAgICAgICAgcHJvamVjdE5hbWVEaXYuYXBwZW5kQ2hpbGQocHJvamVjdE5hbWUpO1xuICAgICAgICBwcm9qZWN0TmFtZURpdi5hcHBlbmRDaGlsZChyZW1vdmVQcm9qZWN0KTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRpc3BsYXlQcm9qZWN0cycpLmFwcGVuZENoaWxkKHByb2plY3ROYW1lRGl2KTtcblxuXG4gICAgICAgIHByb2plY3ROYW1lRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY3VycmVudFByb2plY3QgPSBwcm9qZWN0TmFtZURpdi5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHNOYW1lJykudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICBkaXNwbGF5VG9kb3MocHJvamVjdEFycmF5LmluZGV4T2YoY3VycmVudFByb2plY3QpKTtcbiAgICAgICAgICAgIGRpc3BsYXlBcnJheVByb2plY3RzKCk7XG4gICAgICAgICAgICBzdHlsZVByb2plY3QoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIHByb2plY3RzXG4gICAgICAgIHJlbW92ZVByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGxldCBpbmRleCA9IHJlbW92ZVByb2plY3QucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2luZGV4Jyk7XG4gICAgICAgICAgICBwcm9qZWN0QXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHRvZG9BcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgaWYgKHByb2plY3RBcnJheS5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9qZWN0ID0gcHJvamVjdEFycmF5WzBdO1xuICAgICAgICAgICAgICAgIGRpc3BsYXlBcnJheVByb2plY3RzKCk7XG4gICAgICAgICAgICAgICAgZGlzcGxheVRvZG9zKHByb2plY3RBcnJheS5pbmRleE9mKGN1cnJlbnRQcm9qZWN0KSk7XG4gICAgICAgICAgICAgICAgc3R5bGVQcm9qZWN0KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHByb2plY3RBcnJheS5pbmNsdWRlcyhjdXJyZW50UHJvamVjdCkpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UHJvamVjdCA9IGN1cnJlbnRQcm9qZWN0O1xuICAgICAgICAgICAgICAgIGRpc3BsYXlBcnJheVByb2plY3RzKCk7XG4gICAgICAgICAgICAgICAgZGlzcGxheVRvZG9zKHByb2plY3RBcnJheS5pbmRleE9mKGN1cnJlbnRQcm9qZWN0KSk7XG4gICAgICAgICAgICAgICAgc3R5bGVQcm9qZWN0KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFwcm9qZWN0QXJyYXkuaW5jbHVkZXMoY3VycmVudFByb2plY3QpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFByb2plY3QgPSBwcm9qZWN0QXJyYXlbMF07XG4gICAgICAgICAgICAgICAgZGlzcGxheUFycmF5UHJvamVjdHMoKTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5VG9kb3MocHJvamVjdEFycmF5LmluZGV4T2YoY3VycmVudFByb2plY3QpKTtcbiAgICAgICAgICAgICAgICBzdHlsZVByb2plY3QoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFByb2plY3QgPSAnJztcbiAgICAgICAgICAgICAgICBkaXNwbGF5QXJyYXlQcm9qZWN0cygpO1xuICAgICAgICAgICAgICAgIHJlbW92ZURvbSgnLmRpc3BsYXlUb2RvJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHByb2plY3REb20oKSB7XG4gICAgZGlzcGxheUFycmF5UHJvamVjdHMoKTtcblxuICAgIC8vIENvbmZpcm0gbmV3IHByb2plY3QgbmFtZSBidXR0b25cbiAgICBjb25zdCBjb25maXJtQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbmZpcm1CdXR0b24nKTtcbiAgICBjb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dFZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpdGxlUHJvamVjdCcpLnZhbHVlO1xuICAgICAgICBwdXNoUHJvamVjdChpbnB1dFZhbHVlKTtcbiAgICAgICAgc3R5bGVQcm9qZWN0KCk7XG4gICAgICAgIGRpc3BsYXlUb2Rvcyhwcm9qZWN0QXJyYXkuaW5kZXhPZihjdXJyZW50UHJvamVjdCkpO1xuICAgIH0pO1xuXG4gICAgLy8gQ2FuY2VsIG5ldyBwcm9qZWN0IG5hbWUgYnV0dG9uXG4gICAgY29uc3QgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbmNlbEJ1dHRvbicpO1xuICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29uc3QgcHJvamVjdENsYXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZFByb2plY3QtcG9wdXAnKTtcbiAgICAgICAgcHJvamVjdENsYXNzLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgfSk7XG59OyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNsZWFyRHVwbGljYXRlKG5hbWUpIHtcbiAgICBsZXQgYXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG5hbWUpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJyYXlbaV0ucmVtb3ZlKCk7XG4gICAgfVxufSIsImltcG9ydCBlbGVtZW50RmFjdG9yeSBmcm9tIFwiLi9lbGVtZW50RmFjdG9yeVwiO1xuaW1wb3J0IHsgcHJvamVjdEFycmF5IH0gZnJvbSBcIi4vcHJvamVjdHNcIjtcbmltcG9ydCB7IGN1cnJlbnRQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdHNcIjtcbmltcG9ydCByZW1vdmVEb20gZnJvbSBcIi4vY2xlYXJQYWdlXCI7XG5pbXBvcnQgZm9ybWF0VG9kb3NQYXJhZ3JhcGhzIGZyb20gXCIuL2Zvcm1hdFRvZG9zXCI7XG5cbmV4cG9ydCBjb25zdCB0b2RvQXJyYXkgPSBbXTtcbmNvbnN0IGRpc3BsYXlFdmVyeVRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlzcGxheVRvZG9zJyk7XG5jb25zdCBjaGFuZ2VGb3JtRGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGRUb2RvJyk7XG5jb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1wcm9qZWN0LWZvcm0nKTtcbmNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3ZlcmxheScpO1xuXG5cbmNvbnN0IHRvZG9GYWN0b3J5ID0gKHRpdGxlLCBkdWVEYXRlLCBwcmlvcml0eSkgPT4ge1xuICAgIHJldHVybiB7IHRpdGxlLCBkdWVEYXRlLCBwcmlvcml0eSB9XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlOZXdUb2RvRm9ybSgpIHtcbiAgICBjaGFuZ2VGb3JtRGlzcGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgICAgIGZvcm0uY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgY29uZmlybUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29uZmlybUJ1dHRvbkZvcm0nKTtcbiAgICBjb25maXJtRm9ybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZm9ybURhdGEoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGNhbmNlbEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsQnV0dG9uRm9ybScpO1xuICAgIGNhbmNlbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICB9KTtcbn07XG5cbmZ1bmN0aW9uIGZvcm1EYXRhKCkge1xuICAgIGlmIChwcm9qZWN0QXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ub1Byb2plY3RzRGl2Jykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGNsZWFyRGF0YSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZScpLnZhbHVlO1xuICAgICAgICBsZXQgZHVlRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkdWVEYXRlJykudmFsdWU7XG4gICAgICAgIGlmIChkdWVEYXRlID09ICcnKSB7XG4gICAgICAgICAgICBkdWVEYXRlID0gJ05vIGRhdGUgcHJldmlldyc7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW9yaXR5Jykub3B0aW9uc1tkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpb3JpdHknKS5zZWxlY3RlZEluZGV4XS50ZXh0O1xuICAgICAgICB0b2RvQXJyYXlbcHJvamVjdEFycmF5LmluZGV4T2YoY3VycmVudFByb2plY3QpXS5wdXNoKHRvZG9GYWN0b3J5KHRpdGxlLCBkdWVEYXRlLCBwcmlvcml0eSkpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubm9Qcm9qZWN0c0RpdicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGRpc3BsYXlUb2Rvcyhwcm9qZWN0QXJyYXkuaW5kZXhPZihjdXJyZW50UHJvamVjdCkpO1xuICAgICAgICBjbGVhckRhdGEoKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5VG9kb3MoaW5kZXgpIHtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcblxuICAgIHJlbW92ZURvbSgnLmRpc3BsYXlUb2RvJyk7XG4gICAgbGV0IGluZGV4UGFyYWdyYXBoID0gMDtcbiAgICBpZiAocHJvamVjdEFycmF5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0b2RvQXJyYXlbaW5kZXhdLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNwbGF5VG9kbyA9IGVsZW1lbnRGYWN0b3J5KCdkaXYnLCB7IGNsYXNzOiAnZGlzcGxheVRvZG8nIH0sIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdG9kb0FycmF5W2luZGV4XVtqXSkge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlUb2RvLmFwcGVuZENoaWxkKGVsZW1lbnRGYWN0b3J5KCdwJywgeyBjbGFzczogYCR7a2V5fVRvZG9gIH0sIGAke2tleX06ICR7dG9kb0FycmF5W2luZGV4XVtqXVtrZXldfWApKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBmb3JtYXRUb2Rvc1BhcmFncmFwaHMoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZUJ1dHRvbiA9IGVsZW1lbnRGYWN0b3J5KCdidXR0b24nLCB7IGNsYXNzOiAncmVtb3ZlVG9kbycsIGluZGV4UGFyYWdyYXBoIH0sICd4JylcbiAgICAgICAgICAgIGRpc3BsYXlUb2RvLmFwcGVuZENoaWxkKHJlbW92ZUJ1dHRvbik7XG4gICAgICAgICAgICBkaXNwbGF5RXZlcnlUb2RvLmFwcGVuZENoaWxkKGRpc3BsYXlUb2RvKTtcbiAgICAgICAgICAgIGluZGV4UGFyYWdyYXBoKys7XG5cbiAgICAgICAgICAgIHJlbW92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0b2RvQXJyYXlbcHJvamVjdEFycmF5LmluZGV4T2YoY3VycmVudFByb2plY3QpXS5zcGxpY2UocmVtb3ZlQnV0dG9uLmdldEF0dHJpYnV0ZSgnaW5kZXhQYXJhZ3JhcGgnKSwgMSk7XG4gICAgICAgICAgICAgICAgZGlzcGxheVRvZG9zKHByb2plY3RBcnJheS5pbmRleE9mKGN1cnJlbnRQcm9qZWN0KSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxufTtcblxuZnVuY3Rpb24gY2xlYXJEYXRhKCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZScpLnZhbHVlID0gJyc7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R1ZURhdGUnKS52YWx1ZSA9ICcnO1xufVxuXG4vLyB6XG5cbmV4cG9ydCBmdW5jdGlvbiB0b2RvcygpIHtcbiAgICBkaXNwbGF5TmV3VG9kb0Zvcm0oKTtcbn1cblxuXG5cblxuXG5cblxuXG5cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlbW92ZURvbShjbGFzc05hbWUpIHtcbiAgICBsZXQgY2hpbGRyZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNsYXNzTmFtZSk7XG4gICAgY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgIGNoaWxkLnJlbW92ZSgpO1xuICAgIH0pO1xufSJdLCJuYW1lcyI6WyJ0eXBlIiwiYXR0cmlidXRlcyIsInRleHRDb250ZW50IiwiY2hpbGRyZW4iLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwia2V5Iiwic2V0QXR0cmlidXRlIiwiZm9yRWFjaCIsImNoaWxkIiwiYXBwZW5kQ2hpbGQiLCJjdXJyZW50UHJvamVjdCIsInByb2plY3RBcnJheSIsInByb2plY3RDbGFzcyIsInF1ZXJ5U2VsZWN0b3IiLCJvdmVybGF5Iiwic3R5bGVQcm9qZWN0IiwicXVlcnlTZWxlY3RvckFsbCIsInByb2plY3QiLCJpbmRleE9mIiwiZ2V0QXR0cmlidXRlIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZGlzcGxheUFycmF5UHJvamVjdHMiLCJhZGRFdmVudExpc3RlbmVyIiwibmFtZSIsImFycmF5IiwiaSIsImxlbmd0aCIsImNsZWFyRHVwbGljYXRlIiwiaW5kZXgiLCJwcm9qZWN0TmFtZURpdiIsImNsYXNzIiwicHJvamVjdE5hbWUiLCJyZW1vdmVQcm9qZWN0IiwiZGlzcGxheVRvZG9zIiwiZSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwicGFyZW50Tm9kZSIsInNwbGljZSIsInRvZG9BcnJheSIsImluY2x1ZGVzIiwicmVtb3ZlRG9tIiwiZGlzcGxheUV2ZXJ5VG9kbyIsImNoYW5nZUZvcm1EaXNwbGF5IiwiaW5kZXhQYXJhZ3JhcGgiLCJqIiwiZGlzcGxheVRvZG8iLCJ1bmRlZmluZWQiLCJyZW1vdmVCdXR0b24iLCJjbGVhckRhdGEiLCJnZXRFbGVtZW50QnlJZCIsInZhbHVlIiwiYWxlcnQiLCJwdXNoIiwic3R5bGUiLCJkaXNwbGF5IiwidGl0bGUiLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJvcHRpb25zIiwic2VsZWN0ZWRJbmRleCIsInRleHQiLCJ0b2RvRmFjdG9yeSIsImZvcm1EYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==
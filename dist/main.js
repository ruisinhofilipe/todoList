(()=>{"use strict";const e=(e,t,o,...l)=>{const c=document.createElement(e);for(let e in t)c.setAttribute(e,t[e]);return c.textContent=o,l.forEach((e=>{c.appendChild(e)})),c};let t,o=[];const l=document.querySelector(".addProject-popup"),c=document.querySelector(".overlay");function d(){document.querySelectorAll(".projectsNameDiv").forEach((e=>{o.indexOf(t)==e.getAttribute("index")?e.classList.add("clicked"):e.classList.remove("clicked")}))}function n(){document.querySelector(".addPrj").addEventListener("click",(()=>{document.querySelector(".addProject-popup").classList.add("visible"),c.classList.add("visible")})),function(e){let t=document.querySelectorAll(".projectsNameDiv");for(let e=0;e<t.length;e++)t[e].remove()}(),o.forEach((l=>{let c=o.indexOf(l);const r=e("div",{class:"projectsNameDiv",index:c}),s=e("div",{class:"projectsName"},l),a=e("button",{class:"removeProject"},"x");r.appendChild(s),r.appendChild(a),document.querySelector(".displayProjects").appendChild(r),r.addEventListener("click",(()=>{t=r.querySelector(".projectsName").textContent,m(o.indexOf(t)),n(),d()})),a.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation();let l=a.parentNode.getAttribute("index");o.splice(l,1),i.splice(l,1),1==o.length?(t=o[0],n(),m(o.indexOf(t)),d()):o.includes(t)?(n(),m(o.indexOf(t)),d()):o.includes(t)?(t="",n(),removeDom(".displayTodo")):(t=o[0],n(),m(o.indexOf(t)),d())}))}))}const i=[],r=document.querySelector(".displayTodos"),s=document.querySelector(".addTodo"),a=document.querySelector(".new-project-form"),u=document.querySelector(".overlay");function m(l){u.classList.remove("visible"),a.classList.remove("visible"),document.querySelectorAll(".displayTodo").forEach((e=>{e.remove()}));let c=0;if(o.length>0)for(let d=0;d<i[l].length;d++){const n=e("div",{class:"displayTodo"},void 0);for(let t in i[l][d])n.appendChild(e("p",{class:`${t}Todo`},`${t}: ${i[l][d][t]}`));const s=e("button",{class:"removeTodo",indexParagraph:c},"x");n.appendChild(s),r.appendChild(n),c++,s.addEventListener("click",(()=>{i[o.indexOf(t)].splice(s.getAttribute("indexParagraph"),1),m(o.indexOf(t))}))}}function v(){document.getElementById("title").value="",document.getElementById("dueDate").value=""}n(),document.querySelector(".confirmButton").addEventListener("click",(()=>{var e;null===(e=document.getElementById("titleProject").value)||o.includes(e)||""===e||" "===e?alert("Please, introduce a valid project name or you that you haven't introduced yet."):(o.push(e),i.push([]),document.getElementById("titleProject").value="",l.classList.remove("visible"),c.classList.remove("visible"),t=e,n()),d(),m(o.indexOf(t))})),document.querySelector(".cancelButton").addEventListener("click",(()=>{document.querySelector(".addProject-popup").classList.remove("visible"),c.classList.remove("visible")})),s.addEventListener("click",(()=>{u.classList.add("visible"),a.classList.add("visible")})),document.querySelector(".confirmButtonForm").addEventListener("click",(e=>{e.preventDefault(),function(){if(0===o.length)alert("There's no projects"),v();else{let e=document.getElementById("title").value,l=document.getElementById("dueDate").value;""==l&&(l="No date preview");let c=document.getElementById("priority").options[document.getElementById("priority").selectedIndex].text;i[o.indexOf(t)].push(((e,t,o)=>({title:e,dueDate:t,priority:o}))(e,l,c)),m(o.indexOf(t)),v()}}()})),document.querySelector(".cancelButtonForm").addEventListener("click",(e=>{e.preventDefault(),u.classList.remove("visible"),a.classList.remove("visible")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPLFdBQzlCUixFQUFRTSxVQUFVRSxPQUFPLFVBQVUsSUVoR3ZDdUIsRUFBa0JyQixpQkFBaUIsU0FBUyxLQUN4QyxFQUFRSixVQUFVQyxJQUFJLFdBQ3RCLEVBQUtELFVBQVVDLElBQUksVUFBVSxJQUdibEIsU0FBU1UsY0FBYyxzQkFDL0JXLGlCQUFpQixTQUFVWSxJQUNuQ0EsRUFBRUMsaUJBWVYsV0FDSSxHQUE0QixJQUF4QjFCLEVBQWFpQixPQUNiMEIsTUFBTSx1QkFDTkgsUUFDRyxDQUNILElBQUlLLEVBQVFyRCxTQUFTaUQsZUFBZSxTQUFTQyxNQUN6Q0ksRUFBVXRELFNBQVNpRCxlQUFlLFdBQVdDLE1BQ2xDLElBQVhJLElBQ0FBLEVBQVUsbUJBRWQsSUFBSUMsRUFBV3ZELFNBQVNpRCxlQUFlLFlBQVlPLFFBQVF4RCxTQUFTaUQsZUFBZSxZQUFZUSxlQUFlQyxLQUM5R3BCLEVBQVU5QixFQUFhTyxRQUFRUixJQUFpQjZDLEtBbkNwQyxFQUFDQyxFQUFPQyxFQUFTQyxLQUMxQixDQUFFRixRQUFPQyxVQUFTQyxhQWtDZ0NJLENBQVlOLEVBQU9DLEVBQVNDLElBQ2pGdkIsRUFBYXhCLEVBQWFPLFFBQVFSLElBQ2xDeUMsR0FDSixDQUNKLENBMUJRWSxFQUFVLElBR0s1RCxTQUFTVSxjQUFjLHFCQUMvQlcsaUJBQWlCLFNBQVVZLElBQ2xDQSxFQUFFQyxpQkFDRixFQUFRakIsVUFBVUUsT0FBTyxXQUN6QixFQUFLRixVQUFVRSxPQUFPLFVBQVUsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2VsZW1lbnRGYWN0b3J5LmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL3Byb2plY3RzLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2NsZWFyRHVwbGljYXRlLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL3RvZG9zLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2NsZWFyUGFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBlbGVtZW50RmFjdG9yeSA9ICh0eXBlLCBhdHRyaWJ1dGVzLCB0ZXh0Q29udGVudCwgLi4uY2hpbGRyZW4pID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgICBmb3IgKGxldCBrZXkgaW4gYXR0cmlidXRlcykge1xuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gICAgfVxuICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0Q29udGVudDtcblxuICAgIGNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGNoaWxkKVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGVsZW1lbnRGYWN0b3J5OyIsImltcG9ydCBlbGVtZW50RmFjdG9yeSBmcm9tICcuL2VsZW1lbnRGYWN0b3J5JztcbmltcG9ydCBjbGVhckR1cGxpY2F0ZSBmcm9tICcuL2NsZWFyRHVwbGljYXRlJztcbmltcG9ydCB7IHRvZG9BcnJheSB9IGZyb20gJy4vdG9kb3MnO1xuaW1wb3J0IHsgZGlzcGxheVRvZG9zIH0gZnJvbSAnLi90b2Rvcyc7XG5cbmV4cG9ydCBsZXQgcHJvamVjdEFycmF5ID0gW107XG5leHBvcnQgbGV0IGN1cnJlbnRQcm9qZWN0O1xuXG5jb25zdCBwcm9qZWN0Q2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkUHJvamVjdC1wb3B1cCcpO1xuY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5Jyk7XG5cbi8vIFB1c2ggcHJvamVjdCB0byBhcnJheVxuZnVuY3Rpb24gcHVzaFByb2plY3QocHJvamVjdE5hbWUpIHtcbiAgICBpZiAocHJvamVjdE5hbWUgIT09IG51bGwgJiYgIXByb2plY3RBcnJheS5pbmNsdWRlcyhwcm9qZWN0TmFtZSkgJiYgcHJvamVjdE5hbWUgIT09ICcnICYmIHByb2plY3ROYW1lICE9PSAnICcpIHtcbiAgICAgICAgcHJvamVjdEFycmF5LnB1c2gocHJvamVjdE5hbWUpO1xuICAgICAgICB0b2RvQXJyYXkucHVzaChbXSk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZVByb2plY3QnKS52YWx1ZSA9ICcnO1xuICAgICAgICBwcm9qZWN0Q2xhc3MuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgICAgY3VycmVudFByb2plY3QgPSBwcm9qZWN0TmFtZTtcbiAgICAgICAgZGlzcGxheUFycmF5UHJvamVjdHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydCgnUGxlYXNlLCBpbnRyb2R1Y2UgYSB2YWxpZCBwcm9qZWN0IG5hbWUgb3IgeW91IHRoYXQgeW91IGhhdmVuXFwndCBpbnRyb2R1Y2VkIHlldC4nKTtcbiAgICB9O1xuICAgIHJldHVybiBwcm9qZWN0QXJyYXk7XG59O1xuXG4vLyBTdHlsZSBlYWNoIHByb2plY3Qgd2hlbiBjbGlja2VkXG5mdW5jdGlvbiBzdHlsZVByb2plY3QoKSB7XG4gICAgbGV0IHByb2plY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3RzTmFtZURpdicpO1xuICAgIHByb2plY3RzLmZvckVhY2gocHJvamVjdCA9PiB7XG4gICAgICAgIGlmIChwcm9qZWN0QXJyYXkuaW5kZXhPZihjdXJyZW50UHJvamVjdCkgPT0gcHJvamVjdC5nZXRBdHRyaWJ1dGUoJ2luZGV4JykpIHtcbiAgICAgICAgICAgIHByb2plY3QuY2xhc3NMaXN0LmFkZCgnY2xpY2tlZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvamVjdC5jbGFzc0xpc3QucmVtb3ZlKCdjbGlja2VkJyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmZ1bmN0aW9uIGRpc3BsYXlBcnJheVByb2plY3RzKCkge1xuICAgIC8vIENoYW5nZSBwcm9qZWN0IGlucHV0IGRpc3BsYXkgcHJvcGVydHlcbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZFByaicpO1xuICAgIGFkZFByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb2plY3RDbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGRQcm9qZWN0LXBvcHVwJyk7XG4gICAgICAgIHByb2plY3RDbGFzcy5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgIH0pO1xuXG4gICAgY2xlYXJEdXBsaWNhdGUoJy5wcm9qZWN0c05hbWVEaXYnKTtcbiAgICBwcm9qZWN0QXJyYXkuZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICAgICAgbGV0IGluZGV4ID0gcHJvamVjdEFycmF5LmluZGV4T2YocHJvamVjdCk7XG4gICAgICAgIGNvbnN0IHByb2plY3ROYW1lRGl2ID0gZWxlbWVudEZhY3RvcnkoJ2RpdicsIHsgY2xhc3M6ICdwcm9qZWN0c05hbWVEaXYnLCBpbmRleCB9KTtcbiAgICAgICAgY29uc3QgcHJvamVjdE5hbWUgPSBlbGVtZW50RmFjdG9yeSgnZGl2JywgeyBjbGFzczogJ3Byb2plY3RzTmFtZScgfSwgcHJvamVjdCk7XG4gICAgICAgIGNvbnN0IHJlbW92ZVByb2plY3QgPSBlbGVtZW50RmFjdG9yeSgnYnV0dG9uJywgeyBjbGFzczogJ3JlbW92ZVByb2plY3QnIH0sICd4Jyk7XG4gICAgICAgIHByb2plY3ROYW1lRGl2LmFwcGVuZENoaWxkKHByb2plY3ROYW1lKTtcbiAgICAgICAgcHJvamVjdE5hbWVEaXYuYXBwZW5kQ2hpbGQocmVtb3ZlUHJvamVjdCk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXNwbGF5UHJvamVjdHMnKS5hcHBlbmRDaGlsZChwcm9qZWN0TmFtZURpdik7XG5cblxuICAgICAgICBwcm9qZWN0TmFtZURpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGN1cnJlbnRQcm9qZWN0ID0gcHJvamVjdE5hbWVEaXYucXVlcnlTZWxlY3RvcignLnByb2plY3RzTmFtZScpLnRleHRDb250ZW50O1xuICAgICAgICAgICAgZGlzcGxheVRvZG9zKHByb2plY3RBcnJheS5pbmRleE9mKGN1cnJlbnRQcm9qZWN0KSk7XG4gICAgICAgICAgICBkaXNwbGF5QXJyYXlQcm9qZWN0cygpO1xuICAgICAgICAgICAgc3R5bGVQcm9qZWN0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFJlbW92ZSBwcm9qZWN0c1xuICAgICAgICByZW1vdmVQcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBsZXQgaW5kZXggPSByZW1vdmVQcm9qZWN0LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdpbmRleCcpO1xuICAgICAgICAgICAgcHJvamVjdEFycmF5LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB0b2RvQXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIGlmIChwcm9qZWN0QXJyYXkubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UHJvamVjdCA9IHByb2plY3RBcnJheVswXTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5QXJyYXlQcm9qZWN0cygpO1xuICAgICAgICAgICAgICAgIGRpc3BsYXlUb2Rvcyhwcm9qZWN0QXJyYXkuaW5kZXhPZihjdXJyZW50UHJvamVjdCkpO1xuICAgICAgICAgICAgICAgIHN0eWxlUHJvamVjdCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9qZWN0QXJyYXkuaW5jbHVkZXMoY3VycmVudFByb2plY3QpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFByb2plY3QgPSBjdXJyZW50UHJvamVjdDtcbiAgICAgICAgICAgICAgICBkaXNwbGF5QXJyYXlQcm9qZWN0cygpO1xuICAgICAgICAgICAgICAgIGRpc3BsYXlUb2Rvcyhwcm9qZWN0QXJyYXkuaW5kZXhPZihjdXJyZW50UHJvamVjdCkpO1xuICAgICAgICAgICAgICAgIHN0eWxlUHJvamVjdCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghcHJvamVjdEFycmF5LmluY2x1ZGVzKGN1cnJlbnRQcm9qZWN0KSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9qZWN0ID0gcHJvamVjdEFycmF5WzBdO1xuICAgICAgICAgICAgICAgIGRpc3BsYXlBcnJheVByb2plY3RzKCk7XG4gICAgICAgICAgICAgICAgZGlzcGxheVRvZG9zKHByb2plY3RBcnJheS5pbmRleE9mKGN1cnJlbnRQcm9qZWN0KSk7XG4gICAgICAgICAgICAgICAgc3R5bGVQcm9qZWN0KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9qZWN0ID0gJyc7XG4gICAgICAgICAgICAgICAgZGlzcGxheUFycmF5UHJvamVjdHMoKTtcbiAgICAgICAgICAgICAgICByZW1vdmVEb20oJy5kaXNwbGF5VG9kbycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9qZWN0RG9tKCkge1xuICAgIGRpc3BsYXlBcnJheVByb2plY3RzKCk7XG5cbiAgICAvLyBDb25maXJtIG5ldyBwcm9qZWN0IG5hbWUgYnV0dG9uXG4gICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb25maXJtQnV0dG9uJyk7XG4gICAgY29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXRWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZVByb2plY3QnKS52YWx1ZTtcbiAgICAgICAgcHVzaFByb2plY3QoaW5wdXRWYWx1ZSk7XG4gICAgICAgIHN0eWxlUHJvamVjdCgpO1xuICAgICAgICBkaXNwbGF5VG9kb3MocHJvamVjdEFycmF5LmluZGV4T2YoY3VycmVudFByb2plY3QpKTtcbiAgICB9KTtcblxuICAgIC8vIENhbmNlbCBuZXcgcHJvamVjdCBuYW1lIGJ1dHRvblxuICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWxCdXR0b24nKTtcbiAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb2plY3RDbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGRQcm9qZWN0LXBvcHVwJyk7XG4gICAgICAgIHByb2plY3RDbGFzcy5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgIH0pO1xufTsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjbGVhckR1cGxpY2F0ZShuYW1lKSB7XG4gICAgbGV0IGFycmF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChuYW1lKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFycmF5W2ldLnJlbW92ZSgpO1xuICAgIH1cbn0iLCJpbXBvcnQgZWxlbWVudEZhY3RvcnkgZnJvbSBcIi4vZWxlbWVudEZhY3RvcnlcIjtcbmltcG9ydCB7IHByb2plY3RBcnJheSB9IGZyb20gXCIuL3Byb2plY3RzXCI7XG5pbXBvcnQgeyBjdXJyZW50UHJvamVjdCB9IGZyb20gXCIuL3Byb2plY3RzXCI7XG5pbXBvcnQgcmVtb3ZlRG9tIGZyb20gXCIuL2NsZWFyUGFnZVwiO1xuaW1wb3J0IGZvcm1hdFRvZG9zUGFyYWdyYXBocyBmcm9tIFwiLi9mb3JtYXRUb2Rvc1wiO1xuXG5leHBvcnQgY29uc3QgdG9kb0FycmF5ID0gW107XG5jb25zdCBkaXNwbGF5RXZlcnlUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRpc3BsYXlUb2RvcycpO1xuY29uc3QgY2hhbmdlRm9ybURpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkVG9kbycpO1xuY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctcHJvamVjdC1mb3JtJyk7XG5jb25zdCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm92ZXJsYXknKTtcblxuXG5jb25zdCB0b2RvRmFjdG9yeSA9ICh0aXRsZSwgZHVlRGF0ZSwgcHJpb3JpdHkpID0+IHtcbiAgICByZXR1cm4geyB0aXRsZSwgZHVlRGF0ZSwgcHJpb3JpdHkgfVxufVxuXG5mdW5jdGlvbiBkaXNwbGF5TmV3VG9kb0Zvcm0oKSB7XG4gICAgY2hhbmdlRm9ybURpc3BsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgICAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGNvbmZpcm1Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbmZpcm1CdXR0b25Gb3JtJyk7XG4gICAgY29uZmlybUZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGZvcm1EYXRhKCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBjYW5jZWxGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbmNlbEJ1dHRvbkZvcm0nKTtcbiAgICBjYW5jZWxGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgICAgZm9ybS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgfSk7XG59O1xuXG5mdW5jdGlvbiBmb3JtRGF0YSgpIHtcbiAgICBpZiAocHJvamVjdEFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBhbGVydCgnVGhlcmVcXCdzIG5vIHByb2plY3RzJyk7XG4gICAgICAgIGNsZWFyRGF0YSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZScpLnZhbHVlO1xuICAgICAgICBsZXQgZHVlRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkdWVEYXRlJykudmFsdWU7XG4gICAgICAgIGlmIChkdWVEYXRlID09ICcnKSB7XG4gICAgICAgICAgICBkdWVEYXRlID0gJ05vIGRhdGUgcHJldmlldyc7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW9yaXR5Jykub3B0aW9uc1tkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpb3JpdHknKS5zZWxlY3RlZEluZGV4XS50ZXh0O1xuICAgICAgICB0b2RvQXJyYXlbcHJvamVjdEFycmF5LmluZGV4T2YoY3VycmVudFByb2plY3QpXS5wdXNoKHRvZG9GYWN0b3J5KHRpdGxlLCBkdWVEYXRlLCBwcmlvcml0eSkpO1xuICAgICAgICBkaXNwbGF5VG9kb3MocHJvamVjdEFycmF5LmluZGV4T2YoY3VycmVudFByb2plY3QpKTtcbiAgICAgICAgY2xlYXJEYXRhKCk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheVRvZG9zKGluZGV4KSB7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgZm9ybS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG5cbiAgICByZW1vdmVEb20oJy5kaXNwbGF5VG9kbycpO1xuICAgIGxldCBpbmRleFBhcmFncmFwaCA9IDA7XG4gICAgaWYgKHByb2plY3RBcnJheS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdG9kb0FycmF5W2luZGV4XS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY29uc3QgZGlzcGxheVRvZG8gPSBlbGVtZW50RmFjdG9yeSgnZGl2JywgeyBjbGFzczogJ2Rpc3BsYXlUb2RvJyB9LCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHRvZG9BcnJheVtpbmRleF1bal0pIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5VG9kby5hcHBlbmRDaGlsZChlbGVtZW50RmFjdG9yeSgncCcsIHsgY2xhc3M6IGAke2tleX1Ub2RvYCB9LCBgJHtrZXl9OiAke3RvZG9BcnJheVtpbmRleF1bal1ba2V5XX1gKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gZm9ybWF0VG9kb3NQYXJhZ3JhcGhzKCk7XG4gICAgICAgICAgICBjb25zdCByZW1vdmVCdXR0b24gPSBlbGVtZW50RmFjdG9yeSgnYnV0dG9uJywgeyBjbGFzczogJ3JlbW92ZVRvZG8nLCBpbmRleFBhcmFncmFwaCB9LCAneCcpXG4gICAgICAgICAgICBkaXNwbGF5VG9kby5hcHBlbmRDaGlsZChyZW1vdmVCdXR0b24pO1xuICAgICAgICAgICAgZGlzcGxheUV2ZXJ5VG9kby5hcHBlbmRDaGlsZChkaXNwbGF5VG9kbyk7XG4gICAgICAgICAgICBpbmRleFBhcmFncmFwaCsrO1xuXG4gICAgICAgICAgICByZW1vdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9kb0FycmF5W3Byb2plY3RBcnJheS5pbmRleE9mKGN1cnJlbnRQcm9qZWN0KV0uc3BsaWNlKHJlbW92ZUJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2luZGV4UGFyYWdyYXBoJyksIDEpO1xuICAgICAgICAgICAgICAgIGRpc3BsYXlUb2Rvcyhwcm9qZWN0QXJyYXkuaW5kZXhPZihjdXJyZW50UHJvamVjdCkpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmZ1bmN0aW9uIGNsZWFyRGF0YSgpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUnKS52YWx1ZSA9ICcnO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkdWVEYXRlJykudmFsdWUgPSAnJztcbn1cblxuLy8gelxuXG5leHBvcnQgZnVuY3Rpb24gdG9kb3MoKSB7XG4gICAgZGlzcGxheU5ld1RvZG9Gb3JtKCk7XG59XG5cblxuXG5cblxuXG5cblxuXG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZW1vdmVEb20oY2xhc3NOYW1lKSB7XG4gICAgbGV0IGNoaWxkcmVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjbGFzc05hbWUpO1xuICAgIGNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgICBjaGlsZC5yZW1vdmUoKTtcbiAgICB9KTtcbn0iXSwibmFtZXMiOlsidHlwZSIsImF0dHJpYnV0ZXMiLCJ0ZXh0Q29udGVudCIsImNoaWxkcmVuIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImtleSIsInNldEF0dHJpYnV0ZSIsImZvckVhY2giLCJjaGlsZCIsImFwcGVuZENoaWxkIiwiY3VycmVudFByb2plY3QiLCJwcm9qZWN0QXJyYXkiLCJwcm9qZWN0Q2xhc3MiLCJxdWVyeVNlbGVjdG9yIiwib3ZlcmxheSIsInN0eWxlUHJvamVjdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwcm9qZWN0IiwiaW5kZXhPZiIsImdldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImRpc3BsYXlBcnJheVByb2plY3RzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm5hbWUiLCJhcnJheSIsImkiLCJsZW5ndGgiLCJjbGVhckR1cGxpY2F0ZSIsImluZGV4IiwicHJvamVjdE5hbWVEaXYiLCJjbGFzcyIsInByb2plY3ROYW1lIiwicmVtb3ZlUHJvamVjdCIsImRpc3BsYXlUb2RvcyIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInBhcmVudE5vZGUiLCJzcGxpY2UiLCJ0b2RvQXJyYXkiLCJpbmNsdWRlcyIsInJlbW92ZURvbSIsImRpc3BsYXlFdmVyeVRvZG8iLCJjaGFuZ2VGb3JtRGlzcGxheSIsImluZGV4UGFyYWdyYXBoIiwiaiIsImRpc3BsYXlUb2RvIiwidW5kZWZpbmVkIiwicmVtb3ZlQnV0dG9uIiwiY2xlYXJEYXRhIiwiZ2V0RWxlbWVudEJ5SWQiLCJ2YWx1ZSIsImFsZXJ0IiwicHVzaCIsInRpdGxlIiwiZHVlRGF0ZSIsInByaW9yaXR5Iiwib3B0aW9ucyIsInNlbGVjdGVkSW5kZXgiLCJ0ZXh0IiwidG9kb0ZhY3RvcnkiLCJmb3JtRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=